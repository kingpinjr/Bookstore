@page
@model BookstoreWeb.Pages.Books.ViewBooksModel
@{
    Layout = HttpContext.User.Identity.IsAuthenticated ? "_LayoutAuthenticated" : "_Layout";
}
<body class="bg-img">
    <form method="post" class="form-group">
        <div class="row m-2">
            <div class="col-2">
                <label class="form-label">Genre</label>
            </div>
            <div class="col-8">
                <select asp-for="SelectedGenreId" asp-items="Model.Genres"></select>
            </div>
            <div class="col-2">
                <button class="btn btn-primary" id="btnView">Display</button>
            </div>
        </div>
        @foreach(var book in Model.Books)
        {
            <div style=" border-block: solid;">
                <div class="container" style="display: flex; align-items: flex-start;min-height: 400px;">
                    <div class="book-image" style="margin: auto;">
                        <img src="@book.PictureURL" width="230" height="350" style="margin: auto;">
                    </div>
                    <div class="book-details" style="width: 60%;">
                        <h2 style="font-size: 50px; margin: 10px 0px 10px 20px;">@book.Title
                        </h2>
                        <p style="margin: 10px 0px 10px 20px;"><strong>Author:</strong> @book.AuthorName</p>
                        <p style="margin: 10px 0px 10px 20px;"><strong>Published:</strong> @book.PublicationDate</p>
                        <p style="margin: 10px 0px 10px 20px;">
                            <strong>Genre:</strong>
                            @foreach (var g in Model.SelectedGenreInfo)
                            {

                                @if (@g.GenreID != Model.SelectedGenreInfo[Model.SelectedGenreInfo.Count - 1].GenreID)
                                {
                                    <label>@g.GenreName,</label>
                                }
                                else
                                {
                                    <label>@g.GenreName</label>
                                }
                            }
                        </p>
                        <p style="margin: 10px 0px 10px 20px;"><strong>Price:</strong> @book.Price.ToString("c")</p>
                        <p style="margin: 10px 0px 10px 20px;"><strong>Description:</strong> @book.Description</p>
                    </div>
                </div>
                <div class="row m-2">
                    <div class="col-12 text-center">
                        <a asp-page="EditBook" asp-route-id="@book.BookId" class="btn btn-primary"><i class="bi bi-pencil-square"></i>Edit</a>
                        <a asp-page="DeleteBook" asp-route-id="@book.BookId" class="btn btn-danger"
                           onclick="return confirm('Are you sure you want to delete this item? The process cannot be undone!');"><i class="bi bi-trash"></i>Delete</a>
                    </div>
                </div>
            </div>
                
        }
    </form>
</body>